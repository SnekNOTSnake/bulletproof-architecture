(self.webpackChunk_bulletproof_client=self.webpackChunk_bulletproof_client||[]).push([[470],{7470:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>y});var r=n(6694),a=n(985),o=n(6700),i=n(3460),l=n(602),c=n(5346),u=n(1249),s=n(4164),d=n(4168),f=n(8989),m=n(8763),b=n(5314);const p=(0,n(8209).Z)((t=>({alert:{marginBottom:t.spacing(2)}})));var g;function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const y=t=>{let{user:e}=t;const[n,h]=r.useState(""),[O,{loading:y,data:v,error:j}]=(0,b.RQ)({update:(t,e)=>{let{data:n}=e;t.modify({fields:{books:e=>{const r=[];e.nodes&&r.push(...e.nodes);const o=t.writeFragment({data:null==n?void 0:n.createBook,fragment:(0,a.Ps)(g||(i=["\n\t\t\t\t\t\t\t\tfragment NewBook on Book {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\t\tcreated\n\t\t\t\t\t\t\t\t\tlastChanged\n\t\t\t\t\t\t\t\t\tauthor {\n\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t"],l||(l=i.slice(0)),g=Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(l)}}))))});var i,l;return r.unshift(o),k(k({},e),{},{nodes:r})}}})}}),P=p();return e?r.createElement(i.Z,null,r.createElement(l.Z,{container:!0},r.createElement(l.Z,{item:!0,md:6,xs:12},r.createElement("form",{onSubmit:async t=>{try{if(t.preventDefault(),y)return;await O({variables:{title:n}})}catch(t){console.error(t)}}},r.createElement(c.Z,null,r.createElement(u.Z,{title:"Create a book"}),r.createElement(s.Z,null,r.createElement(i.Z,{className:P.alert},j?r.createElement(o.Z,{severity:"error"},j.message):"",null!=v&&v.createBook?r.createElement(o.Z,null,"Created ",v.createBook.id," at ",v.createBook.created):""),r.createElement(m.Z,{fullWidth:!0,variant:"outlined",label:"Title",value:n,onChange:t=>h(t.currentTarget.value)})),r.createElement(d.Z,null,r.createElement(f.Z,{variant:"contained",color:"primary",disabled:y,type:"submit"},"Submit"))))))):r.createElement("div",null,"You have to be logged in first")}},5314:(t,e,n)=>{"use strict";n.d(e,{N2:()=>f,tJ:()=>b,RQ:()=>g,_n:()=>k,jV:()=>y});var r,a,o,i,l,c=n(985),u=n(5486);function s(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const d=(0,c.Ps)(r||(r=s(["\n    query Book($id: ID!) {\n  book(id: $id) {\n    id\n    title\n    author {\n      name\n    }\n    created\n    lastChanged\n  }\n}\n    "])));function f(t){return u.useQuery(d,t)}const m=(0,c.Ps)(a||(a=s(["\n    mutation DeleteBook($id: ID!) {\n  deleteBook(id: $id)\n}\n    "])));function b(t){return u.useMutation(m,t)}const p=(0,c.Ps)(o||(o=s(["\n    mutation CreateBook($title: String!) {\n  createBook(title: $title) {\n    id\n    title\n    created\n    lastChanged\n    author {\n      name\n    }\n  }\n}\n    "])));function g(t){return u.useMutation(p,t)}const h=(0,c.Ps)(i||(i=s(["\n    mutation UpdateBook($id: ID!, $title: String!) {\n  updateBook(id: $id, title: $title) {\n    id\n    title\n    created\n    lastChanged\n    author {\n      id\n      name\n      email\n    }\n  }\n}\n    "])));function k(t){return u.useMutation(h,t)}const O=(0,c.Ps)(l||(l=s(["\n    query Books($first: Int!, $after: String, $where: BooksWhereInput) {\n  books(first: $first, after: $after, where: $where) {\n    nodes {\n      id\n      title\n      created\n      lastChanged\n      author {\n        name\n      }\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n    "])));function y(t){return u.useQuery(O,t)}}}]);
//# sourceMappingURL=470.bundle.js.map