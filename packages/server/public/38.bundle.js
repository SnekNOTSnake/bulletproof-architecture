(self.webpackChunk_bulletproof_client=self.webpackChunk_bulletproof_client||[]).push([[38],{1038:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(6694),o=n(5314);const a=e=>{let{id:t,title:n}=e;const[a,l]=r.useState(n),[i,{loading:u,error:c}]=(0,o._n)({onError:e=>console.error(e.message)});return r.createElement("div",{className:"EditBook"},r.createElement("h2",null,"EditBook"),r.createElement("form",{onSubmit:e=>{e.preventDefault(),u||i({variables:{id:t,title:a}})}},c?r.createElement("div",{style:{color:"red"}},c.message):"",r.createElement("input",{type:"text",name:"title",value:a,onChange:e=>l(e.currentTarget.value)}),r.createElement("button",{type:"submit"},"Save")))};function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=e=>{let{match:t,history:n}=e;const l=t.params.id,[u,c]=r.useState(!1),[s,d]=r.useState(""),{loading:b,data:m,error:f}=(0,o.N2)({variables:{id:l}}),[p]=(0,o.tJ)({update:e=>{e.modify({fields:{books:(e,t)=>{let{readField:n}=t;const r=[];if(e.nodes){const t=e.nodes.filter((e=>n("id",e)!==l));r.push(...t)}return i(i({},e),{},{nodes:r})}}})},onCompleted:()=>n.push("/"),onError:e=>d(e.message)});return f?r.createElement("div",null,f.message):b?r.createElement("div",null,"Loading..."):null!=m&&m.book?r.createElement("div",{className:"Book"},r.createElement("div",null,r.createElement("h2",null,m.book.title),r.createElement("ul",null,r.createElement("li",null,"Book ID: ",m.book.id),r.createElement("li",null,"Written by: ",m.book.author.name),r.createElement("li",null,"Created at: ",m.book.created),r.createElement("li",null,"Last update at: ",m.book.lastChanged)),s?r.createElement("div",{style:{color:"red"}},s):"",r.createElement("button",{onClick:()=>p({variables:{id:l}}),type:"button"},"Delete"),r.createElement("button",{onClick:()=>c((e=>!e)),type:"button"},"Edit")),u?r.createElement(a,{id:m.book.id,title:m.book.title}):""):r.createElement("div",null,"No book with that ID")}},5314:(e,t,n)=>{"use strict";n.d(t,{N2:()=>b,tJ:()=>f,RQ:()=>k,_n:()=>E,jV:()=>y});var r,o,a,l,i,u=n(985),c=n(5486);function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const d=(0,u.Ps)(r||(r=s(["\n    query Book($id: ID!) {\n  book(id: $id) {\n    id\n    title\n    author {\n      name\n    }\n    created\n    lastChanged\n  }\n}\n    "])));function b(e){return c.useQuery(d,e)}const m=(0,u.Ps)(o||(o=s(["\n    mutation DeleteBook($id: ID!) {\n  deleteBook(id: $id)\n}\n    "])));function f(e){return c.useMutation(m,e)}const p=(0,u.Ps)(a||(a=s(["\n    mutation CreateBook($title: String!) {\n  createBook(title: $title) {\n    id\n    title\n    created\n    lastChanged\n    author {\n      name\n    }\n  }\n}\n    "])));function k(e){return c.useMutation(p,e)}const h=(0,u.Ps)(l||(l=s(["\n    mutation UpdateBook($id: ID!, $title: String!) {\n  updateBook(id: $id, title: $title) {\n    id\n    title\n    created\n    lastChanged\n    author {\n      id\n      name\n      email\n    }\n  }\n}\n    "])));function E(e){return c.useMutation(h,e)}const g=(0,u.Ps)(i||(i=s(["\n    query Books($first: Int!, $after: String, $where: BooksWhereInput) {\n  books(first: $first, after: $after, where: $where) {\n    nodes {\n      id\n      title\n      created\n      lastChanged\n      author {\n        name\n      }\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n    "])));function y(e){return c.useQuery(g,e)}}}]);
//# sourceMappingURL=38.bundle.js.map