(self.webpackChunk_bulletproof_client=self.webpackChunk_bulletproof_client||[]).push([[474],{5474:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var r,o=n(6694),a=n(985),i=n(5314);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const s=t=>{let{user:e}=t;const[n,u]=o.useState(""),[l,{loading:s,data:d,error:f}]=(0,i.RQ)({update:(t,e)=>{let{data:n}=e;t.modify({fields:{books:e=>{const o=[];e.nodes&&o.push(...e.nodes);const i=t.writeFragment({data:null==n?void 0:n.createBook,fragment:(0,a.Ps)(r||(u=["\n\t\t\t\t\t\t\t\tfragment NewBook on Book {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\t\tcreated\n\t\t\t\t\t\t\t\t\tlastChanged\n\t\t\t\t\t\t\t\t\tauthor {\n\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t"],l||(l=u.slice(0)),r=Object.freeze(Object.defineProperties(u,{raw:{value:Object.freeze(l)}}))))});var u,l;return o.unshift(i),c(c({},e),{},{nodes:o})}}})}});return e?o.createElement("div",{className:"CreateBook"},o.createElement("h2",null,"CreateBook"),o.createElement("form",{onSubmit:async t=>{try{if(t.preventDefault(),s)return;await l({variables:{title:n}})}catch(t){console.error(t)}}},f?o.createElement("div",{style:{color:"red"}},f.message):"",null!=d&&d.createBook?o.createElement("div",null,"Created ",d.createBook.id," at ",d.createBook.created):"",o.createElement("input",{type:"text",name:"title",value:n,onChange:t=>u(t.currentTarget.value)}),o.createElement("button",{disabled:s,type:"submit"},"Submit"))):o.createElement("div",null,"You have to be logged in first")}},5314:(t,e,n)=>{"use strict";n.d(e,{N2:()=>f,tJ:()=>p,RQ:()=>h,_n:()=>k,jV:()=>y});var r,o,a,i,u,c=n(985),l=n(5486);function s(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const d=(0,c.Ps)(r||(r=s(["\n    query Book($id: ID!) {\n  book(id: $id) {\n    id\n    title\n    author {\n      name\n    }\n    created\n    lastChanged\n  }\n}\n    "])));function f(t){return l.useQuery(d,t)}const b=(0,c.Ps)(o||(o=s(["\n    mutation DeleteBook($id: ID!) {\n  deleteBook(id: $id)\n}\n    "])));function p(t){return l.useMutation(b,t)}const m=(0,c.Ps)(a||(a=s(["\n    mutation CreateBook($title: String!) {\n  createBook(title: $title) {\n    id\n    title\n    created\n    lastChanged\n    author {\n      name\n    }\n  }\n}\n    "])));function h(t){return l.useMutation(m,t)}const g=(0,c.Ps)(i||(i=s(["\n    mutation UpdateBook($id: ID!, $title: String!) {\n  updateBook(id: $id, title: $title) {\n    id\n    title\n    created\n    lastChanged\n    author {\n      id\n      name\n      email\n    }\n  }\n}\n    "])));function k(t){return l.useMutation(g,t)}const O=(0,c.Ps)(u||(u=s(["\n    query Books($first: Int!, $after: String, $where: BooksWhereInput) {\n  books(first: $first, after: $after, where: $where) {\n    nodes {\n      id\n      title\n      created\n      lastChanged\n      author {\n        name\n      }\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n    "])));function y(t){return l.useQuery(O,t)}}}]);
//# sourceMappingURL=474.bundle.js.map